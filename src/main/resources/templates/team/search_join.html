<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>INSPINIA | Dashboard v.4</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link rel="shortcut icon" href="#" />

</head>

<body class="top-navigation">
<div id="wrapper">
    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom white-bg">
            <nav class="navbar navbar-static-top" role="navigation">
                <div class="navbar-header">
                    <button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse"
                            class="navbar-toggle collapsed" type="button">
                        <i class="fa fa-reorder"></i>
                    </button>
                    <a href="#" class="navbar-brand">报名系统</a>
                </div>
                <div class="navbar-collapse collapse" id="navbar">
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                            <a aria-expanded="false" role="button" href="team_tables"> 我参加的比赛</a>
                        </li>

                        <li class="dropdown">
                            <a aria-expanded="false" role="button" href="team_tables_all"> 所有比赛</a>
                        </li>
                        <li class="dropdown">
                            <a aria-expanded="false" role="button" href="search_join"> 管理我的团队</a>
                        </li>
                    </ul>
                    <ul class="nav navbar-top-links navbar-right">

<!--                        团队信息-->
                        <li class="dropdown">
                            <a class="dropdown-toggle count-info"  href="team_info">
                                <!--                            信息条数-->
                                <i class="glyphicon glyphicon-user"></i> <span class="label label-warning"></span>
                            </a>
                        </li>

                        <li>
                            <a href="login">
                                <i class="fa fa-sign-out"></i> 退出登录
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="wrapper wrapper-content">
            <h2 class="text-center">
                <span class="text-navy">邀请队员加入我的团队</span>
            </h2>
            <form action="index.html" method="get">
                <div class="input-group">

                    <input id="id" name="memId" type="text" placeholder="输入队员学号" class="form-control input-lg">

                    <div class="input-group-btn">
                        <button id="submit" class="btn btn-lg btn-primary" type="button">
                            邀请
                        </button>
                    </div>
                </div>

            </form>
            <h2 class="text-center">
                <span class="text-navy">管理我的团队</span>
            </h2>
            <!--            表格-->
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>管理我的团队</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-wrench"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">

                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>学号</th>
                            <th>姓名</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody id="table">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="pull-right">
                10GB of <strong>250GB</strong> Free.
            </div>
            <div>
                <strong>Copyright</strong> Example Company &copy; 2014-2015
            </div>
        </div>

    </div>
</div>


<!-- Mainly scripts -->
<script src="js/jquery-2.1.1.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Custom and plugin javascript -->
<script src="js/inspinia.js"></script>
<script src="js/plugins/pace/pace.min.js"></script>

<!-- Flot -->
<script src="js/plugins/flot/jquery.flot.js"></script>
<script src="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
<script src="js/plugins/flot/jquery.flot.resize.js"></script>

<!-- ChartJS-->
<script src="js/plugins/chartJs/Chart.min.js"></script>

<!-- Peity -->
<script src="js/plugins/peity/jquery.peity.min.js"></script>
<!-- Peity demo -->
<script src="js/demo/peity-demo.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<script>
    function tren(memId){
        swal({
            text:"确定要踢出这个队员吗？",
            showCancelButton: true,
            confirmButtonText: "确定"
        }).then(function (isConfirm) {
            if(isConfirm == true) {
                $.ajax({
                    url:"online/deleteMemInTeam",
                    type:"post",
                    dataType: "json",
                    data:{"memId":memId},
                    success:function (result) {
                        if(result.code==200){
                            swal("已经踢出").then(function () {
                                window.location.reload();
                            });
                        }else{
                            swal("失败原因："+result.msg);
                        }
                    }
                });
            }else{

            }
        })
    }
    $(document).ready(function () {
        $.ajax({
            url:"online/member",
            dataType:"json",
            type:"get",
            success:function (result) {
                if(result.hasOwnProperty("data")){
                    for(var i=0;i<result.data.length;i++){
                        var ms=result.data[i];
                        var html=" <tr>\n" +
                            "                                <th>"+(i+1)+"</th>\n" +
                            "                                <th>"+ms.memId+"</th>\n" +
                            "                                <th>"+ms.memName+"</a></th>\n" +
                            "                                <th>\n" +
                            "                                    <button type=\"button\" class=\"btn btn-w-m btn-warning btn-xs\" onclick='tren("+ms.memId+")'>踢出队员</button>\n" +
                            "                                </th>\n" +
                            "                            </tr>";
                        $("#table").append(html);
                    }
                }else{
                    $("#table").append("无信息");
                }
            }
        });
        $("#submit").click(function () {
            var memId=$("#id").val();
            if(memId.length!=9){
                swal("学号长度有问题"+memId.length+memId+$("#id").val());
            }else{
                $.ajax({
                    type:"post",
                    url:"online/joinTeam",
                    data:$("#id").serialize(),
                    datatype:"json",
                    success:function (result) {
                        swal(result.msg);
                        console.log(result);
                        if(result.code!=200){//加入失败
                        }else{
                        }
                    },
                    error:function (result) {
                        swal("出现未知错误请重试");
                    }
                });
            }
        });
    });
</script>

</body>

</html>
