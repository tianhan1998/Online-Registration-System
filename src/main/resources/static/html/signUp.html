<!DOCTYPE html>
<script language="JavaScript" src="js/jquery.min.js"></script>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
</head>
    <body>
        <form id="regform" action="/signUp" method="post" onsubmit="return false">
            学号:<input name="id" onblur="checkId(this.value)"/>
            <label id="tip"></label>
            姓名:<input name="username"/>
            密码:<input name="password" type="password" id="password"/>
            <label id="tipPassword"></label>
            二次输入密码:<input name="password2" type="password" onblur="checkPassword(this.value)"/>
            性别：
            <label><input type="radio" value="1" name="sex">男生</label>
            <label><input type="radio" value="0" name="sex">女生</label>
            安全邮箱:<input type="email"/>
            <input type="submit" onclick="checkForm($('#regform'))" value="提交">
        </form>
    <label style="color: red" id="result"></label>
    </body>
<script language="JavaScript">
    flag=false;
    function checkForm(form){
        if(flag==true){
            $.ajax({
                url:'/ORS/signUp',
                type:'post',
                datatype:'json',
                data:form.serialize(),
                success:function(result){
                    if(result.success=="true"){
                        alert("注册成功");
                    }else{
                        $('#result').html(result.Error);
                    }
                }
            })
        }
    }
    function checkId(id){
        if(id!="") {
            // var targeturl='localhost:8080/ORS/signUp';
            // $.ajax({
            //     url: targeturl,
            //     type: 'get',
            //     datatype: 'JSON',
            //     data: {'id': id},
            //     success: function (result) {
            //         if (result.success == "true") {
            //             $('#tip').css("color", "green");
            //             $('#tip').html(result.Message);
            //         } else {
            //             $('#tip').css("color", "red");
            //             $('#tip').html(result.Error);
            //         }
            //     }
            // })
            $.get(
                'localhost:8080/ORS/signUp',{"id":id},function (result) {alert(result.Message);
                }
            )
        }else{
            $('#tip').html("");
        }
    }
    function checkPassword(ps) {
        if(ps!="") {
            var password=$('#password').val();
            if (password == ps) {
                flag = true;
                $('#tipPassword').css("color", "green");
                $('#tipPassword').html("密码相同");
            } else {
                flag = false;
                $('#tipPassword').css("color", "red");
                $('#tipPassword').html("两次输入的密码不相同");
            }
        }else{
            $('#tipPassword').html("");
        }
    }
</script>
</html>
